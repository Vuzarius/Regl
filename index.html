<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vexus ‚Äî –ü–æ—Ä—Ç–∞–ª —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–æ–≤</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&family=Exo+2:wght@300;400;600;800&display=swap" rel="stylesheet">
<style>
:root {
  --cyan: #00BFFF;
  --cyan-dim: rgba(0,191,255,0.15);
  --bg: #050507;
  --bg2: #090b10;
  --bg3: #0d1018;
  --text: #c8d8e8;
  --dim: #566878;
  --border: rgba(0,191,255,0.18);
  --border-hi: rgba(0,191,255,0.55);
  --red: #ff3e3e;
  --green: #00d48a;
}
* { margin:0; padding:0; box-sizing:border-box; }
html { scroll-behavior:smooth; }
body {
  background: var(--bg);
  color: var(--text);
  font-family: 'Exo 2', sans-serif;
  min-height: 100vh;
  overflow-x: hidden;
}
body::before {
  content:'';
  position:fixed; inset:0;
  background-image:
    linear-gradient(rgba(0,191,255,0.025) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0,191,255,0.025) 1px, transparent 1px);
  background-size: 44px 44px;
  pointer-events:none; z-index:0;
}
.glow-top {
  position:fixed; top:-300px; left:50%; transform:translateX(-50%);
  width:900px; height:500px;
  background: radial-gradient(ellipse, rgba(0,191,255,0.07) 0%, transparent 68%);
  pointer-events:none; z-index:0;
}
.wrap { position:relative; z-index:1; max-width:860px; margin:0 auto; padding:0 24px; }

header { padding: 56px 0 36px; text-align:center; }
.logo { display:inline-flex; align-items:center; gap:20px; margin-bottom:14px; }
.logo svg { width:60px; height:60px; filter:drop-shadow(0 0 14px rgba(0,191,255,.65)); animation:glow 3s ease-in-out infinite; }
@keyframes glow {
  0%,100% { filter:drop-shadow(0 0 12px rgba(0,191,255,.6)); }
  50%      { filter:drop-shadow(0 0 26px rgba(0,191,255,.95)); }
}
.logo-name { font-family:'Rajdhani',sans-serif; font-size:54px; font-weight:700; color:#fff; letter-spacing:5px; }
.subtitle { font-family:'JetBrains Mono',monospace; font-size:11px; color:var(--cyan); letter-spacing:3.5px; text-transform:uppercase; opacity:.75; }

.progress { display:flex; align-items:center; justify-content:center; gap:0; margin:36px 0 44px; }
.p-dot {
  width:34px; height:34px; border-radius:50%;
  border:2px solid var(--border); display:flex; align-items:center; justify-content:center;
  font-family:'JetBrains Mono',monospace; font-size:13px; color:var(--dim);
  transition:all .35s; position:relative; z-index:1; background:var(--bg);
}
.p-dot.active { border-color:var(--cyan); color:var(--cyan); box-shadow:0 0 14px rgba(0,191,255,.3); }
.p-dot.done   { border-color:var(--green); color:var(--green); background:rgba(0,212,138,.08); }
.p-line { width:90px; height:1px; background:var(--border); transition:background .4s; }
.p-line.done  { background:var(--green); }

.screen { display:none; }
.screen.active { display:block; animation:fadein .4s ease; }
@keyframes fadein { from{opacity:0;transform:translateY(10px)} to{opacity:1;transform:translateY(0)} }

.sec-title { text-align:center; margin-bottom:32px; }
.sec-title h2 { font-family:'Rajdhani',sans-serif; font-size:22px; font-weight:700; color:var(--cyan); letter-spacing:3px; text-transform:uppercase; }
.sec-title p  { font-family:'JetBrains Mono',monospace; font-size:11px; color:var(--dim); margin-top:7px; }

.cards { display:grid; grid-template-columns:repeat(3,1fr); gap:18px; margin-bottom:40px; }
@media(max-width:620px){ .cards{grid-template-columns:1fr;} }

.card {
  background:var(--bg3); border:1px solid var(--border); border-radius:8px;
  padding:32px 20px 28px; cursor:pointer; transition:all .25s; text-align:center;
  position:relative; overflow:hidden; user-select:none;
}
.card::after {
  content:''; position:absolute; inset:0;
  background:linear-gradient(135deg, rgba(0,191,255,.07) 0%, transparent 60%);
  opacity:0; transition:opacity .3s;
}
.card:hover { border-color:var(--border-hi); transform:translateY(-5px); box-shadow:0 4px 32px rgba(0,191,255,.09); }
.card:hover::after { opacity:1; }
.card.sel { border-color:var(--cyan); background:rgba(0,191,255,.05); }
.card-sel-badge {
  position:absolute; top:10px; right:10px;
  background:var(--cyan); color:#000;
  font-family:'JetBrains Mono',monospace; font-size:9px; font-weight:700;
  padding:2px 8px; border-radius:2px; letter-spacing:1px;
  opacity:0; transition:opacity .25s;
}
.card.sel .card-sel-badge { opacity:1; }
.card-icon { font-size:38px; display:block; margin-bottom:14px; }
.card-name { font-family:'Rajdhani',sans-serif; font-size:20px; font-weight:700; color:#fff; letter-spacing:2px; text-transform:uppercase; margin-bottom:8px; }
.card-info { font-family:'JetBrains Mono',monospace; font-size:11px; color:var(--dim); line-height:1.55; }

.btn {
  display:inline-flex; align-items:center; gap:10px;
  background:var(--cyan); color:#000;
  border:none; padding:13px 38px;
  font-family:'Rajdhani',sans-serif; font-size:16px; font-weight:700;
  letter-spacing:3px; text-transform:uppercase; cursor:pointer;
  border-radius:4px; transition:all .2s; text-decoration:none;
}
.btn:hover { background:#fff; box-shadow:0 0 22px rgba(0,191,255,.35); }
.btn:disabled { opacity:.35; cursor:not-allowed; pointer-events:none; }
.btn-ghost { background:transparent; color:var(--cyan); border:1px solid var(--cyan); }
.btn-ghost:hover { background:var(--cyan); color:#000; }
.btn-sm { padding:9px 22px; font-size:13px; letter-spacing:2px; }
.btn-center { display:flex; justify-content:center; gap:12px; flex-wrap:wrap; }

.box {
  max-width:480px; margin:0 auto;
  background:var(--bg3); border:1px solid var(--border);
  border-radius:10px; padding:40px 36px;
}
.box-title { font-family:'Rajdhani',sans-serif; font-size:20px; font-weight:700; color:var(--cyan); letter-spacing:2px; text-transform:uppercase; margin-bottom:6px; }
.box-sub   { font-family:'JetBrains Mono',monospace; font-size:11px; color:var(--dim); line-height:1.65; margin-bottom:24px; }
label { display:block; font-family:'JetBrains Mono',monospace; font-size:10px; color:var(--cyan); letter-spacing:2px; text-transform:uppercase; margin-bottom:7px; }
input[type=text] {
  width:100%; background:var(--bg2); border:1px solid var(--border);
  border-radius:4px; padding:12px 16px;
  color:#fff; font-family:'JetBrains Mono',monospace; font-size:14px;
  outline:none; transition:border-color .2s; margin-bottom:20px;
}
input[type=text]:focus { border-color:var(--cyan); box-shadow:0 0 10px rgba(0,191,255,.1); }
input.err { border-color:var(--red)!important; }

/* –ë–ª–æ–∫ —Å –∫–æ–º–∞–Ω–¥–æ–π –±–æ—Ç—É */
.cmd-block {
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 18px 20px;
  margin-bottom: 24px;
}
.cmd-label {
  font-family:'JetBrains Mono',monospace; font-size:10px;
  color:var(--dim); text-transform:uppercase; letter-spacing:2px;
  margin-bottom: 10px;
}
.cmd-text {
  font-family:'JetBrains Mono',monospace; font-size:16px;
  color: var(--cyan); font-weight:700; letter-spacing:1px;
  cursor: pointer; user-select:all;
  display: flex; align-items:center; gap: 10px;
}
.cmd-text:hover { color: #fff; }
.cmd-copy-hint {
  font-family:'JetBrains Mono',monospace; font-size:10px;
  color:var(--dim); margin-top:8px;
}
.copied-badge {
  font-family:'JetBrains Mono',monospace; font-size:10px;
  color:var(--green); opacity:0; transition:opacity .3s;
  margin-left:auto;
}
.copied-badge.show { opacity:1; }

/* Code cells */
.code-wrap { display:flex; gap:12px; justify-content:center; margin:28px 0 20px; }
.code-cell {
  width:64px; height:72px;
  background:var(--bg2); border:2px solid var(--border); border-radius:8px;
  text-align:center; font-family:'JetBrains Mono',monospace;
  font-size:30px; font-weight:700; color:var(--cyan);
  outline:none; transition:all .2s; caret-color:var(--cyan);
}
.code-cell:focus { border-color:var(--cyan); box-shadow:0 0 18px rgba(0,191,255,.2); }
.code-cell.filled{ border-color:rgba(0,191,255,.6); }
.code-cell.wrong { border-color:var(--red)!important; animation:shake .4s; }
.code-cell.right { border-color:var(--green)!important; }
@keyframes shake {
  0%,100%{transform:translateX(0)} 25%{transform:translateX(-7px)} 75%{transform:translateX(7px)}
}

.alert {
  font-family:'JetBrains Mono',monospace; font-size:12px;
  padding:10px 14px; border-radius:4px; text-align:center; margin:12px 0;
  display:none;
}
.alert.show { display:block; }
.alert.err  { color:var(--red);   background:rgba(255,62,62,.07);  border:1px solid rgba(255,62,62,.2); }
.alert.ok   { color:var(--green); background:rgba(0,212,138,.07);  border:1px solid rgba(0,212,138,.2); }
.alert.info { color:var(--cyan);  background:rgba(0,191,255,.06);  border:1px solid rgba(0,191,255,.2); }

.hint { font-family:'JetBrains Mono',monospace; font-size:11px; color:var(--dim); text-align:center; line-height:1.7; margin-top:14px; }

.back {
  display:inline-flex; align-items:center; gap:6px;
  font-family:'JetBrains Mono',monospace; font-size:11px; color:var(--dim);
  cursor:pointer; margin-bottom:28px; background:none; border:none; transition:color .2s;
}
.back:hover { color:var(--cyan); }

.div { display:flex; align-items:center; gap:14px; margin:24px 0; }
.div-line { flex:1; height:1px; background:linear-gradient(90deg,transparent,var(--cyan),transparent); opacity:.25; }
.div-txt  { font-family:'JetBrains Mono',monospace; font-size:10px; color:var(--cyan); letter-spacing:2px; opacity:.6; }

/* –®–∞–≥–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ */
.steps { margin-bottom: 24px; }
.step {
  display:flex; gap:14px; align-items:flex-start;
  padding: 12px 0;
  border-bottom: 1px solid rgba(0,191,255,0.07);
}
.step:last-child { border-bottom:none; }
.step-num {
  width:24px; height:24px; border-radius:50%;
  background: var(--cyan-dim); border:1px solid var(--border-hi);
  font-family:'JetBrains Mono',monospace; font-size:11px; color:var(--cyan);
  display:flex; align-items:center; justify-content:center;
  flex-shrink:0; margin-top:1px;
}
.step-text {
  font-family:'JetBrains Mono',monospace; font-size:11px;
  color:var(--text); line-height:1.6;
}
.step-text b { color:#fff; }

footer { text-align:center; padding:48px 0 20px; font-family:'JetBrains Mono',monospace; font-size:10px; color:var(--dim); opacity:.4; letter-spacing:2px; }
</style>
</head>
<body>
<div class="glow-top"></div>
<div class="wrap">

  <header>
    <div class="logo">
      <svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="50" cy="50" r="44" stroke="#00BFFF" stroke-width="7"/>
        <circle cx="50" cy="50" r="14" stroke="#00BFFF" stroke-width="7"/>
        <line x1="50" y1="6"  x2="50" y2="36" stroke="#00BFFF" stroke-width="7" stroke-linecap="round"/>
        <line x1="50" y1="64" x2="50" y2="94" stroke="#00BFFF" stroke-width="7" stroke-linecap="round"/>
        <line x1="10"  y1="28" x2="36" y2="43" stroke="#00BFFF" stroke-width="7" stroke-linecap="round"/>
        <line x1="64" y1="57" x2="90" y2="72" stroke="#00BFFF" stroke-width="7" stroke-linecap="round"/>
        <line x1="10"  y1="72" x2="36" y2="57" stroke="#00BFFF" stroke-width="7" stroke-linecap="round"/>
        <line x1="64" y1="43" x2="90" y2="28" stroke="#00BFFF" stroke-width="7" stroke-linecap="round"/>
      </svg>
      <span class="logo-name">VEXUS</span>
    </div>
    <div class="subtitle">// –ü–æ—Ä—Ç–∞–ª —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–æ–≤ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞</div>
  </header>

  <div class="progress">
    <div class="p-dot active" id="d1">1</div>
    <div class="p-line" id="l1"></div>
    <div class="p-dot" id="d2">2</div>
    <div class="p-line" id="l2"></div>
    <div class="p-dot" id="d3">3</div>
  </div>

  <!-- ‚ïê‚ïê‚ïê –®–ê–ì 1: –í—ã–±–æ—Ä —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–∞ ‚ïê‚ïê‚ïê -->
  <div class="screen active" id="s1">
    <div class="sec-title">
      <h2>–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç</h2>
      <p>// –≤—ã–±–µ—Ä–∏—Ç–µ —Å–≤–æ—é –¥–æ–ª–∂–Ω–æ—Å—Ç—å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–æ–∫—É–º–µ–Ω—Ç—É</p>
    </div>

    <div class="cards">
      <div class="card" id="card-moderator" onclick="selectCard('moderator','–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä','üõ°Ô∏è')">
        <span class="card-sel-badge">–í–´–ë–†–ê–ù–û</span>
        <span class="card-icon">üõ°Ô∏è</span>
        <div class="card-name">–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä</div>
        <div class="card-info">–ü—Ä–∞–≤–∏–ª–∞, –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏<br>–∏ –∫–æ–º–∞–Ω–¥—ã Discord-–º–æ–¥–µ—Ä–∞—Ü–∏–∏</div>
      </div>
      <div class="card" id="card-admin" onclick="selectCard('admin','–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä','‚öôÔ∏è')">
        <span class="card-sel-badge">–í–´–ë–†–ê–ù–û</span>
        <span class="card-icon">‚öôÔ∏è</span>
        <div class="card-name">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</div>
        <div class="card-info">–ü—Ä–∞–≤–∏–ª–∞, –∫–æ–º–∞–Ω–¥—ã<br>–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–≤—ã–º —Å–µ—Ä–≤–µ—Ä–æ–º</div>
      </div>
      <div class="card" id="card-eventer" onclick="selectCard('eventer','–ò–≤–µ–Ω—Ç–µ—Ä','üé≠')">
        <span class="card-sel-badge">–í–´–ë–†–ê–ù–û</span>
        <span class="card-icon">üé≠</span>
        <div class="card-name">–ò–≤–µ–Ω—Ç–µ—Ä</div>
        <div class="card-info">–ü—Ä–∞–≤–∏–ª–∞, –∏–≤–µ–Ω—Ç-–æ—á–∫–∏<br>–∏ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏–µ –∏–≤–µ–Ω—Ç–æ–≤</div>
      </div>
    </div>

    <div class="btn-center">
      <button class="btn" id="btnNext1" disabled onclick="goStep2()">–î–∞–ª–µ–µ ‚Üí</button>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê –®–ê–ì 2: –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è ‚Äî –Ω–∞–ø–∏—Å–∞—Ç—å –±–æ—Ç—É ‚ïê‚ïê‚ïê -->
  <div class="screen" id="s2">
    <button class="back" onclick="goStep1()">‚Üê –ù–∞–∑–∞–¥</button>
    <div class="box">
      <div class="box-title">–ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥</div>
      <div class="box-sub">–ù–∞–ø–∏—à–∏ –±–æ—Ç—É –∫–æ–º–∞–Ω–¥—É –≤ Discord ‚Äî –æ–Ω –ø—Ä–∏—à–ª—ë—Ç —Ç–µ–±–µ 4-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥ –≤ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è.</div>

      <div class="steps">
        <div class="step">
          <div class="step-num">1</div>
          <div class="step-text">–û—Ç–∫—Ä–æ–π Discord –∏ –Ω–∞–π–¥–∏ –±–æ—Ç–∞ <b>Vexus</b> –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ</div>
        </div>
        <div class="step">
          <div class="step-num">2</div>
          <div class="step-text">–ù–∞–ø–∏—à–∏ –µ–º—É —ç—Ç—É –∫–æ–º–∞–Ω–¥—É –≤ –ª—é–±–æ–π –∫–∞–Ω–∞–ª –≥–¥–µ –µ—Å—Ç—å –±–æ—Ç:</div>
        </div>
      </div>

      <div class="cmd-block" onclick="copyCommand()">
        <div class="cmd-label">// –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –±–æ—Ç–∞</div>
        <div class="cmd-text" id="cmdText">
          <span id="cmdValue">!reg –º–æ–¥–µ—Ä–∞—Ç–æ—Ä</span>
          <span class="copied-badge" id="copiedBadge">‚úì —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ</span>
        </div>
        <div class="cmd-copy-hint">–Ω–∞–∂–º–∏ —á—Ç–æ–±—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</div>
      </div>

      <div class="steps">
        <div class="step">
          <div class="step-num">3</div>
          <div class="step-text">–ë–æ—Ç –ø—Ä–∏—à–ª—ë—Ç —Ç–µ–±–µ <b>4-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥</b> –≤ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è</div>
        </div>
        <div class="step">
          <div class="step-num">4</div>
          <div class="step-text">–í–µ—Ä–Ω–∏—Å—å —Å—é–¥–∞ –∏ –Ω–∞–∂–º–∏ <b>¬´–í–≤–µ—Å—Ç–∏ –∫–æ–¥¬ª</b></div>
        </div>
      </div>

      <div id="alert2" class="alert"></div>

      <div class="btn-center">
        <button class="btn" onclick="goStep3()">–í–≤–µ—Å—Ç–∏ –∫–æ–¥ ‚Üí</button>
      </div>

      <p class="hint" style="margin-top:18px">
        –ï—Å–ª–∏ –±–æ—Ç –æ—Ç–≤–µ—Ç–∏–ª ¬´–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞¬ª ‚Äî —Ç–µ–±—è –Ω–µ—Ç –≤ —Å–ø–∏—Å–∫–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞.<br>
        –û–±—Ä–∞—Ç–∏—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É —Å–µ—Ä–≤–µ—Ä–∞.
      </p>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê –®–ê–ì 3: –í–≤–æ–¥ –∫–æ–¥–∞ + Discord ID ‚ïê‚ïê‚ïê -->
  <div class="screen" id="s3">
    <button class="back" onclick="goStep2()">‚Üê –ù–∞–∑–∞–¥</button>
    <div class="box">
      <div class="box-title">–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥</div>
      <div class="box-sub" id="codeBoxSub">–í–≤–µ–¥–∏ –∫–æ–¥ –∏–∑ –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π Discord –∏ —Å–≤–æ–π Discord ID –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏.</div>

      <label>Discord ID</label>
      <input type="text" id="discordIdInput" placeholder="123456789012345678" maxlength="21" oninput="this.classList.remove('err')">

      <label style="margin-top:4px">–ö–æ–¥ –∏–∑ –õ–°</label>
      <div class="code-wrap">
        <input class="code-cell" id="c0" maxlength="1" type="text" inputmode="numeric" oninput="onDigit(0)" onkeydown="onKey(event,0)" onfocus="this.select()">
        <input class="code-cell" id="c1" maxlength="1" type="text" inputmode="numeric" oninput="onDigit(1)" onkeydown="onKey(event,1)" onfocus="this.select()">
        <input class="code-cell" id="c2" maxlength="1" type="text" inputmode="numeric" oninput="onDigit(2)" onkeydown="onKey(event,2)" onfocus="this.select()">
        <input class="code-cell" id="c3" maxlength="1" type="text" inputmode="numeric" oninput="onDigit(3)" onkeydown="onKey(event,3)" onfocus="this.select()">
      </div>

      <div id="alert3" class="alert"></div>

      <div class="btn-center" style="margin-top:8px">
        <button class="btn" id="btnVerify" onclick="verifyCode()">–û—Ç–∫—Ä—ã—Ç—å —Ä–µ–≥–ª–∞–º–µ–Ω—Ç</button>
      </div>

      <p class="hint" style="margin-top:18px">
        –ö–∞–∫ —É–∑–Ω–∞—Ç—å Discord ID:<br>
        –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ ‚Üí –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ ‚Üí –ü–ö–ú –Ω–∞ —Å–µ–±–µ ‚Üí ¬´–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å ID¬ª
      </p>
    </div>
  </div>

</div>
<footer>VEXUS &nbsp;¬∑&nbsp; PORTAL &nbsp;¬∑&nbsp; CONFIDENTIAL</footer>

<!-- –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç—ã ‚Äî –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–º —Ñ–∞–π–ª–æ–º encrypted_data.js -->
<script src="encrypted_data.js"></script>

<script>
// ‚îÄ‚îÄ –°–æ—Å—Ç–æ—è–Ω–∏–µ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
let selectedReg  = null;
let selectedName = null;
let selectedIcon = null;

// ‚îÄ‚îÄ –®–∞–≥ 1: –í—ã–±–æ—Ä –∫–∞—Ä—Ç–æ—á–∫–∏ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function selectCard(reg, name, icon) {
  document.querySelectorAll('.card').forEach(c => c.classList.remove('sel'));
  document.getElementById('card-' + reg).classList.add('sel');
  selectedReg  = reg;
  selectedName = name;
  selectedIcon = icon;
  document.getElementById('btnNext1').disabled = false;
}

// ‚îÄ‚îÄ –ù–∞–≤–∏–≥–∞—Ü–∏—è ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function setStep(n) {
  document.querySelectorAll('.screen').forEach((s,i) => {
    s.classList.toggle('active', i === n-1);
  });
  [1,2,3].forEach(i => {
    document.getElementById('d'+i).className = 'p-dot' + (i < n ? ' done' : i === n ? ' active' : '');
    if (i < 3) document.getElementById('l'+i).className = 'p-line' + (i < n ? ' done' : '');
  });
}

function goStep1() { setStep(1); }

function goStep2() {
  if (!selectedReg) return;
  // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–º–∞–Ω–¥—É –ø–æ–¥ –≤—ã–±—Ä–∞–Ω–Ω—É—é —Ä–æ–ª—å
  const regToCmd = {
    'moderator': '–º–æ–¥–µ—Ä–∞—Ç–æ—Ä',
    'admin':     '–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä',
    'eventer':   '–∏–≤–µ–Ω—Ç–µ—Ä',
  };
  document.getElementById('cmdValue').textContent = '!reg ' + regToCmd[selectedReg];
  clearAlert('alert2');
  setStep(2);
}

function goStep3() {
  resetCodeCells();
  clearAlert('alert3');
  document.getElementById('discordIdInput').classList.remove('err');
  setStep(3);
  setTimeout(() => document.getElementById('discordIdInput').focus(), 200);
}

// ‚îÄ‚îÄ –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function copyCommand() {
  const text = document.getElementById('cmdValue').textContent;
  navigator.clipboard.writeText(text).then(() => {
    const badge = document.getElementById('copiedBadge');
    badge.classList.add('show');
    setTimeout(() => badge.classList.remove('show'), 1800);
  });
}

// ‚îÄ‚îÄ –í–≤–æ–¥ –∫–æ–¥–∞ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function onDigit(i) {
  const cell = document.getElementById('c' + i);
  cell.value = cell.value.replace(/\D/g, '').slice(-1);
  cell.classList.toggle('filled', cell.value !== '');
  if (cell.value && i < 3) document.getElementById('c' + (i+1)).focus();
}

function onKey(e, i) {
  if (e.key === 'Backspace' && !document.getElementById('c'+i).value && i > 0)
    document.getElementById('c'+(i-1)).focus();
  if (e.key === 'ArrowLeft'  && i > 0) document.getElementById('c'+(i-1)).focus();
  if (e.key === 'ArrowRight' && i < 3) document.getElementById('c'+(i+1)).focus();
}

function getCode() {
  return [0,1,2,3].map(i => document.getElementById('c'+i).value).join('');
}

function resetCodeCells(cls) {
  [0,1,2,3].forEach(i => {
    const c = document.getElementById('c'+i);
    c.value = '';
    c.className = 'code-cell' + (cls ? ' '+cls : '');
  });
}

// ‚îÄ‚îÄ –ó–∞–≥—Ä—É–∑–∫–∞ —Å–≤–µ–∂–∏—Ö –∫–æ–¥–æ–≤ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// jsDelivr CDN –∏–º–µ–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π purge API ‚Äî –±–æ—Ç –≤—ã–∑—ã–≤–∞–µ—Ç –µ–≥–æ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ
// –∑–∞–ø–∏—Å–∏ codes.js, –ø–æ—ç—Ç–æ–º—É —Ñ–∞–π–ª –≤—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª–µ–Ω –±–µ–∑ –∑–∞–¥–µ—Ä–∂–∫–∏.
// –î–ª—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ –≥—Ä—É–∑–∏–º —á–µ—Ä–µ–∑ fetch —Å cache:'no-store'.

async function fetchFreshCodes() {
  // jsDelivr –æ—Ç–¥–∞—ë—Ç —Ñ–∞–π–ª—ã –∏–∑ GitHub —Å –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –ø–æ—Å–ª–µ purge
  const url = 'https://cdn.jsdelivr.net/gh/vuzarius/Regl@main/codes.js?t=' + Date.now();
  const res = await fetch(url, { cache: 'no-store' });
  if (!res.ok) throw new Error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏: ' + res.status);
  const text = await res.text();
  const match = text.match(/PORTAL_CODES\s*=\s*(\{[\s\S]*\});/);
  if (!match) throw new Error('–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç codes.js');
  return JSON.parse(match[1]);
}

// ‚îÄ‚îÄ –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
async function verifyCode() {
  const discordId = document.getElementById('discordIdInput').value.trim();
  const code      = getCode();

  if (!/^\d{17,21}$/.test(discordId)) {
    document.getElementById('discordIdInput').classList.add('err');
    showAlert('alert3', 'err', '–í–≤–µ–¥–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π Discord ID (17‚Äì21 —Ü–∏—Ñ—Ä–∞)');
    return;
  }
  if (code.length < 4) {
    showAlert('alert3', 'err', '–í–≤–µ–¥–∏ –≤—Å–µ 4 —Ü–∏—Ñ—Ä—ã –∫–æ–¥–∞');
    return;
  }

  const btn = document.getElementById('btnVerify');
  btn.disabled = true;
  showAlert('alert3', 'info', '‚è≥ –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–¥...');

  let portalCodes;
  try {
    portalCodes = await fetchFreshCodes();
  } catch (e) {
    btn.disabled = false;
    showAlert('alert3', 'err', '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–¥–æ–≤: ' + e.message);
    return;
  }
  btn.disabled = false;

  const lookup = discordId + '|' + selectedReg;
  const entry  = portalCodes[lookup];

  if (!entry) {
    markWrong();
    showAlert('alert3', 'err', '–ö–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω. –ó–∞–ø—Ä–æ—Å–∏ –Ω–æ–≤—ã–π –∫–æ–º–∞–Ω–¥–æ–π !reg');
    return;
  }
  if (Date.now() / 1000 > entry.exp) {
    markWrong();
    showAlert('alert3', 'err', '–ö–æ–¥ –∏—Å—Ç—ë–∫. –ó–∞–ø—Ä–æ—Å–∏ –Ω–æ–≤—ã–π –∫–æ–º–∞–Ω–¥–æ–π !reg');
    return;
  }
  if (entry.code !== code) {
    markWrong();
    showAlert('alert3', 'err', '–ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥');
    return;
  }

  [0,1,2,3].forEach(i => document.getElementById('c'+i).classList.add('right'));
  showAlert('alert3', 'ok', '‚úì –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–æ–π–¥–µ–Ω–∞! –û—Ç–∫—Ä—ã–≤–∞–µ–º —Ä–µ–≥–ª–∞–º–µ–Ω—Ç...');
  setTimeout(() => openRegulation(entry.key, selectedReg), 900);
}
function markWrong() {
  [0,1,2,3].forEach(i => document.getElementById('c'+i).classList.add('wrong'));
  setTimeout(() => resetCodeCells(), 700);
}

// ‚îÄ‚îÄ –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –∏ –æ—Ç–∫—Ä—ã—Ç–∏–µ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
async function openRegulation(key, regulation) {
  try {
    const encB64 = ENCRYPTED_REGULATIONS[regulation];
    if (!encB64) throw new Error('–î–∞–Ω–Ω—ã–µ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã');
    const html = await decryptAESGCM(encB64, key);
    const blob  = new Blob([html], { type: 'text/html; charset=utf-8' });
    window.open(URL.createObjectURL(blob), '_blank');
    showAlert('alert3', 'ok', '‚úì –†–µ–≥–ª–∞–º–µ–Ω—Ç –æ—Ç–∫—Ä—ã—Ç –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ!');
  } catch(e) {
    showAlert('alert3', 'err', '–û—à–∏–±–∫–∞ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏: ' + e.message);
  }
}

// ‚îÄ‚îÄ AES-GCM —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
async function decryptAESGCM(encB64, password) {
  const combined   = Uint8Array.from(atob(encB64), c => c.charCodeAt(0));
  const nonce      = combined.slice(0, 12);
  const ciphertext = combined.slice(12);

  const saltB64 = typeof PBKDF2_SALT !== 'undefined' ? PBKDF2_SALT : btoa('VexusSalt2025!!');
  const salt    = Uint8Array.from(atob(saltB64), c => c.charCodeAt(0));
  const iters   = typeof PBKDF2_ITERATIONS !== 'undefined' ? PBKDF2_ITERATIONS : 100000;

  const keyMaterial = await crypto.subtle.importKey(
    'raw', new TextEncoder().encode(password), 'PBKDF2', false, ['deriveKey']
  );
  const cryptoKey = await crypto.subtle.deriveKey(
    { name:'PBKDF2', salt, iterations:iters, hash:'SHA-256' },
    keyMaterial,
    { name:'AES-GCM', length:256 },
    false, ['decrypt']
  );
  const plain = await crypto.subtle.decrypt({ name:'AES-GCM', iv:nonce }, cryptoKey, ciphertext);
  return new TextDecoder().decode(plain);
}

// ‚îÄ‚îÄ Helpers ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function showAlert(id, type, msg) {
  const el = document.getElementById(id);
  el.className = 'alert show ' + type;
  el.textContent = msg;
}
function clearAlert(id) {
  const el = document.getElementById(id);
  el.className = 'alert';
  el.textContent = '';
}
</script>

</body>
</html>
